# 要件定義書

## はじめに

本システムは、既存の日本語文法解析機能を拡張し、より高度な文法チェックルールを提供する。文体の統一、表記の統一、日本語表現の品質向上を支援することで、より読みやすく一貫性のある日本語文書の作成を可能にする。

## 用語集

- **文体**: 文章の書き方のスタイル（敬体「ですます調」、常体「である調」など）
- **敬体**: 「です」「ます」で終わる丁寧な文体
- **常体**: 「だ」「である」で終わる普通の文体
- **ら抜き言葉**: 可能の助動詞「られる」から「ら」を省略した表現（例：「食べれる」）
- **二重否定**: 否定表現が二重に使用される表現（例：「ないことはない」）
- **接続詞**: 文と文をつなぐ言葉（例：「しかし」「そして」「また」）
- **接続助詞**: 文節と文節をつなぐ助詞（例：「が」「けれど」「のに」）
- **逆接**: 前の内容と反対の内容を述べる接続（例：「しかし」「が」）
- **読点**: 句読点の「、」
- **表記統一**: 同じ意味の言葉を同じ表記で統一すること
- **漢字の開き**: 漢字で書ける言葉をひらがなで書くこと（例：「出来る」→「できる」）
- **診断情報**: エディタ上で表示されるエラーや警告メッセージ
- **Grammar Rule**: 文法チェックのルールを表すインターフェース

## 要件

### 要件 1

**ユーザーストーリー:** 開発者として、文書内の文体の混在を検出したい。そうすることで、文書全体の統一感を保ち、読みやすさを向上できる。

#### 受入基準

1. WHEN 文書内に「です」または「ます」で終わる文が存在する THEN システムはその文を敬体として認識する
2. WHEN 文書内に「である」で終わる文が存在する THEN システムはその文を常体として認識する
3. WHEN 文書内に敬体と常体が混在する THEN システムは該当箇所に診断情報を表示する
4. WHEN 文体混在が検出される THEN システムは診断情報に文体統一の提案を含める
5. WHEN 「〜である」以外の常体表現（「だ」など）が使用される THEN システムは常体として認識しない

### 要件 2

**ユーザーストーリー:** 開発者として、ら抜き言葉を検出したい。そうすることで、正しい日本語表現を使用できる。

#### 受入基準

1. WHEN 五段活用動詞に「れる」が接続される THEN システムはら抜き言葉として検出する
2. WHEN 一段活用動詞に「れる」が接続される THEN システムはら抜き言葉として検出する
3. WHEN ら抜き言葉が検出される THEN システムは該当箇所に診断情報を表示する
4. WHEN ら抜き言葉が検出される THEN システムは正しい表現（「られる」）を修正候補として提示する
5. WHEN 正しい可能表現が使用される THEN システムはエラーを表示しない

### 要件 3

**ユーザーストーリー:** 開発者として、二重否定を検出したい。そうすることで、わかりにくい表現を避け、明確な文章を書ける。

#### 受入基準

1. WHEN 文中に否定表現が二重に使用される THEN システムは二重否定として検出する
2. WHEN 二重否定が検出される THEN システムは該当箇所に診断情報を表示する
3. WHEN 二重否定が検出される THEN システムは肯定表現への書き換えを提案する
4. WHEN 「ないわけではない」「ないことはない」などの典型的な二重否定パターンが使用される THEN システムは検出する
5. WHEN 単一の否定表現が使用される THEN システムはエラーを表示しない

### 要件 4

**ユーザーストーリー:** 開発者として、同じ助詞の連続使用を検出したい。そうすることで、読みにくい文章を改善できる。

#### 受入基準

1. WHEN 同じ助詞が連続して使用される THEN システムは該当箇所に診断情報を表示する
2. WHEN ユーザーが設定画面を開く THEN システムは同じ助詞の連続使用チェックの有効/無効を切り替えられる
3. WHEN 設定で無効化されている THEN システムは同じ助詞の連続使用を検出しない
4. WHEN 同じ助詞の連続使用が検出される THEN システムは文の書き換えを提案する
5. WHEN 初期設定で拡張機能が起動する THEN システムは同じ助詞の連続使用チェックを無効にする

### 要件 5

**ユーザーストーリー:** 開発者として、同じ接続詞の連続使用を検出したい。そうすることで、単調な文章を避け、表現を豊かにできる。

#### 受入基準

1. WHEN 同じ接続詞が連続する文で使用される THEN システムは該当箇所に診断情報を表示する
2. WHEN 同じ接続詞の連続使用が検出される THEN システムは代替の接続詞を提案する
3. WHEN 「しかし」「また」「そして」などの一般的な接続詞が連続使用される THEN システムは検出する
4. WHEN 異なる接続詞が使用される THEN システムはエラーを表示しない
5. WHEN 接続詞が1文おきに使用される THEN システムは連続使用として検出しない

### 要件 6

**ユーザーストーリー:** 開発者として、逆接の接続助詞「が」の連続使用を検出したい。そうすることで、論理的に明確な文章を書ける。

#### 受入基準

1. WHEN 逆接の「が」が連続する文で使用される THEN システムは該当箇所に診断情報を表示する
2. WHEN 逆接の「が」の連続使用が検出される THEN システムは文の分割や接続詞の変更を提案する
3. WHEN 「が」が主語を示す格助詞として使用される THEN システムは逆接として検出しない
4. WHEN 逆接の「が」が1文おきに使用される THEN システムは連続使用として検出しない
5. WHEN 「けれど」「しかし」などの他の逆接表現が使用される THEN システムは「が」の連続使用として検出しない

### 要件 7

**ユーザーストーリー:** 開発者として、全角と半角アルファベットの混在を検出したい。そうすることで、表記の統一性を保てる。

#### 受入基準

1. WHEN 文書内に全角アルファベットと半角アルファベットが混在する THEN システムは該当箇所に診断情報を表示する
2. WHEN 全角アルファベットが検出される THEN システムは半角への変換を提案する
3. WHEN 半角アルファベットのみが使用される THEN システムはエラーを表示しない
4. WHEN 全角アルファベットのみが使用される THEN システムはエラーを表示しない
5. WHEN 文書全体で表記が統一されている THEN システムはエラーを表示しない

### 要件 8

**ユーザーストーリー:** 開発者として、弱い日本語表現を検出したい。そうすることで、より断定的で明確な文章を書ける。

#### 受入基準

1. WHEN 「かもしれない」が使用される THEN システムは弱い表現として検出する
2. WHEN 「と思われる」が使用される THEN システムは弱い表現として検出する
3. WHEN 「ような気がする」が使用される THEN システムは弱い表現として検出する
4. WHEN 弱い表現が検出される THEN システムは該当箇所に診断情報を表示する
5. WHEN 弱い表現が検出される THEN システムはより断定的な表現を提案する

### 要件 9

**ユーザーストーリー:** 開発者として、1文中の読点の数を検出したい。そうすることで、長すぎる文を分割し、読みやすさを向上できる。

#### 受入基準

1. WHEN 1文中に5個以上の読点が使用される THEN システムは該当箇所に診断情報を表示する
2. WHEN 読点が多すぎる文が検出される THEN システムは文の分割を提案する
3. WHEN 1文中の読点が4個以下である THEN システムはエラーを表示しない
4. WHEN 文の終わりを示す句点が検出される THEN システムは新しい文として読点のカウントをリセットする
5. WHEN 読点の数が閾値を超える THEN システムは診断情報に読点の数を含める

### 要件 10

**ユーザーストーリー:** 開発者として、ウェブ用語や技術用語の表記を統一したい。そうすることで、専門的で正確な文書を作成できる。

#### 受入基準

1. WHEN 「Javascript」が使用される THEN システムは「JavaScript」への修正を提案する
2. WHEN 「Github」が使用される THEN システムは「GitHub」への修正を提案する
3. WHEN 「Typescript」が使用される THEN システムは「TypeScript」への修正を提案する
4. WHEN 「Nodejs」が使用される THEN システムは「Node.js」への修正を提案する
5. WHEN 誤った表記が検出される THEN システムは該当箇所に診断情報を表示する

### 要件 11

**ユーザーストーリー:** 開発者として、漢字の開き方を統一したい。そうすることで、読みやすく自然な日本語文書を作成できる。

#### 受入基準

1. WHEN 「下さい」が使用される THEN システムは「ください」への修正を提案する
2. WHEN 「出来る」が使用される THEN システムは「できる」への修正を提案する
3. WHEN 「有難う」が使用される THEN システムは「ありがとう」への修正を提案する
4. WHEN 「宜しく」が使用される THEN システムは「よろしく」への修正を提案する
5. WHEN 開くべき漢字が検出される THEN システムは該当箇所に診断情報を表示する

### 要件 12

**ユーザーストーリー:** 開発者として、技術用語辞典を使用して専門用語の表記を統一したい。そうすることで、生成AI、クラウドサービス、その他の技術用語を正確に記述できる。

#### 受入基準

1. WHEN 生成AI関連の誤った表記が使用される THEN システムは正しい表記への修正を提案する
2. WHEN AWS関連の誤った表記が使用される THEN システムは正しい表記への修正を提案する
3. WHEN Azure関連の誤った表記が使用される THEN システムは正しい表記への修正を提案する
4. WHEN OCI関連の誤った表記が使用される THEN システムは正しい表記への修正を提案する
5. WHEN 技術用語辞典に登録されている用語が検出される THEN システムは該当箇所に診断情報を表示する

### 要件 13

**ユーザーストーリー:** 開発者として、高度な文法ルールの設定をカスタマイズしたい。そうすることで、プロジェクトやチームの方針に合わせた使い方ができる。

#### 受入基準

1. WHEN ユーザーが設定画面を開く THEN システムは各文法ルールの有効/無効を個別に切り替えられる
2. WHEN ユーザーが設定画面を開く THEN システムは読点の数の閾値を設定できる
3. WHEN ユーザーが設定画面を開く THEN システムは弱い表現の検出レベルを設定できる
4. WHEN ユーザーが設定画面を開く THEN システムはカスタム表記統一ルールを追加できる
5. WHEN 設定が変更される THEN システムは即座に新しい設定を適用する
