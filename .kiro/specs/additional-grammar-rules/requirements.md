# 要件定義書

## はじめに

本システムは、既存の日本語文法解析機能をさらに拡張し、追加の高度な文法チェックルールを提供する。冗長表現の検出、助詞「の」の連続使用、文末表現の単調さ、長すぎる文の検出により、より洗練された日本語文書の作成を支援する。

## 用語集

- **冗長表現**: 重複した意味を持つ表現（例：「馬から落馬する」）
- **重複表現（同語反復）**: 同じ意味の言葉を重ねた表現（例：「頭痛が痛い」）
- **助詞「の」の連続**: 「の」が3回以上連続して使用される表現
- **文末表現の単調さ**: 同じ文末表現が連続して使用される状態
- **長すぎる文**: 一文が長すぎて読みにくい状態
- **診断情報**: エディタ上で表示されるエラーや警告メッセージ
- **Grammar Rule**: 文法チェックのルールを表すインターフェース

## 要件

### 要件 1

**ユーザーストーリー:** 開発者として、冗長表現を検出したい。そうすることで、簡潔で明確な文章を書ける。

#### 受入基準

1. WHEN 「馬から落馬する」が使用される THEN システムは冗長表現として検出する
2. WHEN 「後で後悔する」が使用される THEN システムは冗長表現として検出する
3. WHEN 「一番最初」が使用される THEN システムは冗長表現として検出する
4. WHEN 冗長表現が検出される THEN システムは該当箇所に診断情報を表示する
5. WHEN 冗長表現が検出される THEN システムは簡潔な表現への修正を提案する

### 要件 2

**ユーザーストーリー:** 開発者として、重複表現（同語反復）を検出したい。そうすることで、自然で正確な日本語表現を使用できる。

#### 受入基準

1. WHEN 「頭痛が痛い」が使用される THEN システムは重複表現として検出する
2. WHEN 「違和感を感じる」が使用される THEN システムは重複表現として検出する
3. WHEN 「被害を被る」が使用される THEN システムは重複表現として検出する
4. WHEN 重複表現が検出される THEN システムは該当箇所に診断情報を表示する
5. WHEN 重複表現が検出される THEN システムは適切な表現への修正を提案する

### 要件 3

**ユーザーストーリー:** 開発者として、助詞「の」の連続使用を検出したい。そうすることで、読みやすい文章を書ける。

#### 受入基準

1. WHEN 助詞「の」が3回以上連続して使用される THEN システムは該当箇所に診断情報を表示する
2. WHEN 「の」の連続使用が検出される THEN システムは文の書き換えを提案する
3. WHEN 「の」が2回以下の使用である THEN システムはエラーを表示しない
4. WHEN 「の」の連続使用が検出される THEN システムは診断情報に連続回数を含める
5. WHEN ユーザーが設定画面を開く THEN システムは「の」連続チェックの有効/無効を切り替えられる

### 要件 4

**ユーザーストーリー:** 開発者として、文末表現の単調さを検出したい。そうすることで、表現豊かで読みやすい文章を書ける。

#### 受入基準

1. WHEN 同じ文末表現が3回以上連続する THEN システムは該当箇所に診断情報を表示する
2. WHEN 文末表現の単調さが検出される THEN システムは表現の多様化を提案する
3. WHEN 「です」「ます」「である」などの文末が連続する THEN システムは検出する
4. WHEN 異なる文末表現が使用される THEN システムはエラーを表示しない
5. WHEN 文末表現の単調さが検出される THEN システムは診断情報に連続回数を含める

### 要件 5

**ユーザーストーリー:** 開発者として、長すぎる文を検出したい。そうすることで、読みやすく理解しやすい文章を書ける。

#### 受入基準

1. WHEN 1文の文字数が120文字を超える THEN システムは該当箇所に診断情報を表示する
2. WHEN 長すぎる文が検出される THEN システムは文の分割を提案する
3. WHEN 1文の文字数が120文字以下である THEN システムはエラーを表示しない
4. WHEN 長すぎる文が検出される THEN システムは診断情報に文字数を含める
5. WHEN ユーザーが設定画面を開く THEN システムは文字数の閾値を設定できる

### 要件 6

**ユーザーストーリー:** 開発者として、追加文法ルールの設定をカスタマイズしたい。そうすることで、プロジェクトやチームの方針に合わせた使い方ができる。

#### 受入基準

1. WHEN ユーザーが設定画面を開く THEN システムは各追加文法ルールの有効/無効を個別に切り替えられる
2. WHEN ユーザーが設定画面を開く THEN システムは「の」連続の閾値を設定できる
3. WHEN ユーザーが設定画面を開く THEN システムは文末単調さの閾値を設定できる
4. WHEN ユーザーが設定画面を開く THEN システムは長文の文字数閾値を設定できる
5. WHEN 設定が変更される THEN システムは即座に新しい設定を適用する
