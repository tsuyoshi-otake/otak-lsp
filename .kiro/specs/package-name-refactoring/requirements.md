# 要件ドキュメント

## 概要

VSCode拡張機能「Japanese Grammar Analyzer」を正式名「otak-lcp」に統一するためのリファクタリング作業。パッケージ名、コマンド名、設定項目名、内部識別子を一貫して変更し、ユーザーインターフェースでは「otak-lcp - Japanese Grammar Analyzer」として表示する。

## 用語集

- **otak-lcp**: 拡張機能の正式パッケージ名（小文字）
- **Japanese Grammar Analyzer**: 拡張機能のサブタイトル・機能説明
- **コマンド識別子**: VSCodeコマンドパレットで使用される内部識別子
- **設定項目**: VSCode設定画面で表示される設定キー
- **Language Server**: 言語解析機能を提供するバックエンドサーバー

## 要件

### 要件1

**ユーザーストーリー:** 開発者として、拡張機能の名前を正式名「otak-lcp」に統一したいので、すべてのユーザーインターフェースと内部コードで一貫した命名を使用したい。

#### 受入基準

1. WHEN パッケージ情報を表示する場合 THEN システムは正式名「otak-lcp」をメイン名として表示する
2. WHEN 拡張機能の詳細を表示する場合 THEN システムは「otak-lcp - Japanese Grammar Analyzer」として表示する
3. WHEN VSCodeマーケットプレースで検索する場合 THEN システムは「otak-lcp」で検索可能である
4. WHEN 拡張機能一覧を表示する場合 THEN システムは「otak-lcp - Japanese Grammar Analyzer」として表示する
5. WHEN ログメッセージを出力する場合 THEN システムは「otak-lcp」を使用する

### 要件2

**ユーザーストーリー:** 開発者として、コマンド識別子を新しい命名規則に変更したいので、VSCodeコマンドパレットで一貫した名前でアクセスできるようにしたい。

#### 受入基準

1. WHEN コマンドを実行する場合 THEN システムは「otakLcp.*」形式の識別子を使用する
2. WHEN コマンドタイトルを表示する場合 THEN システムは「otak-lcp:」プレフィックスを使用する
3. WHEN 既存のコマンド識別子を呼び出す場合 THEN システムは新しい識別子にリダイレクトする
4. WHEN コマンドパレットで検索する場合 THEN システムは「otak-lcp」で検索可能である
5. WHEN キーボードショートカットを設定する場合 THEN システムは新しいコマンド識別子を使用する

### 要件3

**ユーザーストーリー:** ユーザーとして、設定項目名を新しい命名規則に変更したいので、VSCode設定画面で一貫した名前で設定を管理できるようにしたい。

#### 受入基準

1. WHEN 設定を変更する場合 THEN システムは「otakLcp.*」形式のキーを使用する
2. WHEN 設定画面を表示する場合 THEN システムは「otak-lcp」カテゴリで設定を表示する
3. WHEN 既存の設定を読み込む場合 THEN システムは古い設定キーから新しいキーに移行する
4. WHEN 設定の説明を表示する場合 THEN システムは「otak-lcp」を使用する
5. WHEN 設定ファイルを編集する場合 THEN システムは新しいキー名でオートコンプリートを提供する

### 要件4

**ユーザーストーリー:** 開発者として、内部コードの識別子を統一したいので、コードベース全体で一貫した命名規則を使用したい。

#### 受入基準

1. WHEN Language Serverを初期化する場合 THEN システムは「otakLcp」識別子を使用する
2. WHEN ログメッセージを出力する場合 THEN システムは「otak-lcp」を使用する
3. WHEN エラーメッセージを表示する場合 THEN システムは「otak-lcp」を使用する
4. WHEN 内部クラスや関数を定義する場合 THEN システムは「otakLcp」命名規則を使用する
5. WHEN コメントや文書を記述する場合 THEN システムは「otak-lcp」を使用する

### 要件5

**ユーザーストーリー:** ユーザーとして、既存の設定や設定ファイルが引き続き動作することを期待するので、後方互換性を維持したい。

#### 受入基準

1. WHEN 古い設定キーが存在する場合 THEN システムは新しいキーに自動移行する
2. WHEN 古いコマンド識別子を使用する場合 THEN システムは新しい識別子にリダイレクトする
3. WHEN 移行処理を実行する場合 THEN システムはユーザーに移行完了を通知する
4. WHEN 移行に失敗する場合 THEN システムは適切なエラーメッセージを表示する
5. WHEN 移行後に古い設定を削除する場合 THEN システムはユーザーの確認を求める