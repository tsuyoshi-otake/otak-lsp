# 残り文法ルール要件書

## はじめに

日本語文法解析システムにおいて、現在未実装の23の文法ルールカテゴリを実装するための要件を定義します。これらのルールは、より高度で複雑な日本語文法エラーの検出を可能にし、システムの完成度を向上させます。

## 用語集

- **文法解析システム**: 日本語テキストの文法的正確性を検証するシステム
- **サ変動詞**: サ行変格活用動詞（例：勉強する、散歩する）
- **ねじれ文**: 主語と述語の対応関係が不適切な文
- **同音異義語**: 発音が同じで意味が異なる語（例：橋・箸・端）
- **敬語**: 尊敬語、謙譲語、丁寧語の総称
- **副詞の呼応**: 副詞と文末表現の適切な組み合わせ
- **修飾語**: 他の語を修飾する語句
- **指示語**: こそあど言葉（これ、それ、あれ、どれなど）
- **受身表現**: 「〜される」「〜れる」などの受動的表現
- **接続詞**: 文と文をつなぐ語（しかし、そして、だから等）
- **送り仮名**: 漢字に付く仮名（動詞・形容詞の活用語尾など）
- **表記ゆれ**: 同一語の漢字・ひらがな・カタカナ表記の不統一
- **全角半角**: 文字の幅（全角：２バイト、半角：１バイト）
- **長音記号**: カタカナの「ー」（伸ばし棒）
- **半角カナ**: 1バイト幅のカタカナ文字
- **漢数字**: 一、二、三などの数字表記
- **アラビア数字**: 1、2、3などの数字表記
- **中黒**: 並列を示す記号「・」
- **括弧**: （）、「」、【】などの囲み記号

## 要件

### 要件1

**ユーザーストーリー:** 日本語学習者として、サ変動詞の誤用を検出してもらいたい、正しい日本語表現を身につけるため

#### 受入基準

1. WHEN テキストに不適切なサ変動詞の活用が含まれる THEN システムはその箇所を検出し適切な活用形を提案する
2. WHEN 「勉強します」「散歩します」などの正しいサ変動詞が使用される THEN システムはエラーを報告しない
3. WHEN 「勉強しています」「散歩していました」などの複合形が使用される THEN システムは適切性を検証する

### 要件2

**ユーザーストーリー:** 文章作成者として、主語の欠如による文の不明瞭さを検出してもらいたい、読み手にとって分かりやすい文章を書くため

#### 受入基準

1. WHEN 文に主語が明示されておらず文意が不明瞭になる THEN システムは主語の欠如を検出する
2. WHEN 文脈から主語が明確に推測できる場合 THEN システムはエラーを報告しない
3. WHEN 複数の文で主語が曖昧に変化する THEN システムは一貫性の問題を検出する

### 要件3

**ユーザーストーリー:** 編集者として、ねじれ文を検出してもらいたい、論理的で読みやすい文章を提供するため

#### 受入基準

1. WHEN 主語と述語の対応関係が不適切な文が存在する THEN システムはねじれ文として検出する
2. WHEN 修飾関係が複雑で文の構造が不明瞭になる THEN システムは構造の問題を指摘する
3. WHEN 文の途中で主語が変化し論理的整合性が失われる THEN システムは論理エラーを検出する

### 要件4

**ユーザーストーリー:** 校正者として、同音異義語の誤用を検出してもらいたい、意味的に正確な文章を作成するため

#### 受入基準

1. WHEN 文脈に適さない同音異義語が使用される THEN システムは誤用を検出し正しい語を提案する
2. WHEN 「橋を渡る」「箸を使う」「端に立つ」など文脈に適した語が使用される THEN システムはエラーを報告しない
3. WHEN 同音異義語の判別が文脈から困難な場合 THEN システムは注意喚起を行う

### 要件5

**ユーザーストーリー:** ビジネス文書作成者として、敬語の誤用を検出してもらいたい、適切な敬語表現でコミュニケーションを行うため

#### 受入基準

1. WHEN 尊敬語と謙譲語が混同して使用される THEN システムは敬語の誤用を検出する
2. WHEN 「いらっしゃる」「お越しになる」などの正しい尊敬語が使用される THEN システムはエラーを報告しない
3. WHEN 「させていただく」の過剰使用や不適切な使用がある THEN システムは適切性を検証する

### 要件6

**ユーザーストーリー:** 日本語教師として、副詞の呼応関係の誤りを検出してもらいたい、学習者に正しい日本語表現を教えるため

#### 受入基準

1. WHEN 「決して〜ない」「必ず〜する」などの副詞と文末表現の呼応が不適切 THEN システムは呼応エラーを検出する
2. WHEN 「きっと〜だろう」「たぶん〜かもしれない」など適切な呼応関係 THEN システムはエラーを報告しない
3. WHEN 複数の副詞が競合し呼応関係が複雑になる THEN システムは整合性を検証する

### 要件7

**ユーザーストーリー:** 技術文書作成者として、修飾語の位置による意味の曖昧さを検出してもらいたい、明確で誤解のない文章を作成するため

#### 受入基準

1. WHEN 修飾語の位置により複数の解釈が可能になる THEN システムは曖昧性を検出する
2. WHEN 「美しい女性の写真」のような係り受けの曖昧さがある THEN システムは構造の問題を指摘する
3. WHEN 修飾語が適切に配置され意味が明確な場合 THEN システムはエラーを報告しない

### 要件8

**ユーザーストーリー:** 文章校閲者として、曖昧な指示語の使用を検出してもらいたい、読み手にとって理解しやすい文章を提供するため

#### 受入基準

1. WHEN 「これ」「それ」「あれ」などの指示語の指す対象が不明確 THEN システムは曖昧性を検出する
2. WHEN 指示語が明確な先行詞を持つ場合 THEN システムはエラーを報告しない
3. WHEN 複数の候補があり指示語の対象が特定困難 THEN システムは明確化を促す

### 要件9

**ユーザーストーリー:** スタイルガイド管理者として、受身表現の多用を検出してもらいたい、能動的で読みやすい文章スタイルを維持するため

#### 受入基準

1. WHEN 文章内で受身表現が過度に使用される THEN システムは多用を検出する
2. WHEN 受身表現が適切に使用され文章が自然な場合 THEN システムはエラーを報告しない
3. WHEN 受身表現の使用頻度が設定された閾値を超える THEN システムは警告を発する

### 要件10

**ユーザーストーリー:** 編集者として、名詞の連続使用による読みにくさを検出してもらいたい、流れの良い文章を作成するため

#### 受入基準

1. WHEN 名詞が連続して使用され文章が読みにくくなる THEN システムは名詞連続を検出する
2. WHEN 「情報システム管理者」のような複合語として適切な場合 THEN システムはエラーを報告しない
3. WHEN 名詞の連続が設定された長さを超える THEN システムは改善を提案する

### 要件11

**ユーザーストーリー:** 文章作成者として、接続詞の誤用を検出してもらいたい、論理的で一貫性のある文章を書くため

#### 受入基準

1. WHEN 文脈に適さない接続詞が使用される THEN システムは誤用を検出し適切な接続詞を提案する
2. WHEN 「しかし」「だから」「そして」などが論理的に適切に使用される THEN システムはエラーを報告しない
3. WHEN 接続詞の使用により論理的矛盾が生じる THEN システムは論理エラーを検出する

### 要件12

**ユーザーストーリー:** 編集者として、送り仮名の揺れを検出してもらいたい、標準的な日本語表記を維持するため

#### 受入基準

1. WHEN 動詞や形容詞の送り仮名が標準形と異なる THEN システムは送り仮名の誤りを検出し標準形を提案する
2. WHEN 「表す」「現す」などの標準的な送り仮名が使用される THEN システムはエラーを報告しない
3. WHEN 補助動詞「いただく」「ください」の送り仮名が誤っている THEN システムは適切な表記を提案する

### 要件13

**ユーザーストーリー:** 文書管理者として、表記ゆれを検出してもらいたい、文書全体の表記統一を図るため

#### 受入基準

1. WHEN 同一語が漢字とひらがなで混在して使用される THEN システムは表記の不統一を検出する
2. WHEN 「できる」「下さい」「致します」などの表記が統一されている THEN システムはエラーを報告しない
3. WHEN 文書内で同一語の表記が複数パターン存在する THEN システムは統一を促す

### 要件14

**ユーザーストーリー:** スタイルガイド管理者として、全角半角数字・記号の混在を検出してもらいたい、統一された表記スタイルを維持するため

#### 受入基準

1. WHEN 同一文書内で数字や記号の全角半角が混在する THEN システムは混在を検出し統一を提案する
2. WHEN 数字や記号が一貫して全角または半角で使用される THEN システムはエラーを報告しない
3. WHEN 「２０２５」と「2025」のような混在がある THEN システムは統一された表記を提案する

### 要件15

**ユーザーストーリー:** 技術文書作成者として、カタカナ長音の誤りを検出してもらいたい、正確な外来語表記を行うため

#### 受入基準

1. WHEN 外来語の長音記号が欠落または過剰に使用される THEN システムは長音の誤りを検出する
2. WHEN 「メール」「デフォルト」などの標準的な長音表記が使用される THEN システムはエラーを報告しない
3. WHEN 「メイル」「デフォルトー」のような誤った長音表記がある THEN システムは正しい表記を提案する

### 要件16

**ユーザーストーリー:** 文書品質管理者として、半角カナの使用を検出してもらいたい、読みやすい文書を提供するため

#### 受入基準

1. WHEN 和文中に半角カナが使用される THEN システムは半角カナを検出し全角カナへの変換を提案する
2. WHEN 全角カナが適切に使用される THEN システムはエラーを報告しない
3. WHEN 「ﾃｽﾄ」「ｼｽﾃﾑ」のような半角カナがある THEN システムは「テスト」「システム」への変換を提案する

### 要件17

**ユーザーストーリー:** 編集者として、数字表記の混在を検出してもらいたい、一貫した数字表記を維持するため

#### 受入基準

1. WHEN 同一文脈で漢数字とアラビア数字が混在する THEN システムは数字表記の不統一を検出する
2. WHEN 数字表記が文脈に応じて適切に統一されている THEN システムはエラーを報告しない
3. WHEN 「三人で5本」「二〇二五年に20件」のような混在がある THEN システムは統一された表記を提案する

### 要件18

**ユーザーストーリー:** 技術文書作成者として、英字・数字・単位周辺のスペースの過不足を検出してもらいたい、読みやすい技術文書を作成するため

#### 受入基準

1. WHEN 英字と数字、数字と単位の間のスペースが不適切 THEN システムはスペースの過不足を検出する
2. WHEN 「3.2 GHz」「Version 1.2」のような適切なスペースが使用される THEN システムはエラーを報告しない
3. WHEN 「3.2GHz」「Version1.2」のようなスペース不足がある THEN システムは適切なスペースを提案する

### 要件19

**ユーザーストーリー:** 校正者として、括弧・引用符の不一致を検出してもらいたい、文法的に正しい文章を提供するため

#### 受入基準

1. WHEN 開き括弧・引用符と閉じが対応しない THEN システムは括弧・引用符の不一致を検出する
2. WHEN 括弧・引用符が適切に対応している THEN システムはエラーを報告しない
3. WHEN 「彼は「すぐ戻ると言った。」のような不一致がある THEN システムは正しい対応を提案する

### 要件20

**ユーザーストーリー:** 文書管理者として、日付表記の揺れを検出してもらいたい、統一された日付形式を維持するため

#### 受入基準

1. WHEN 西暦・和暦や区切り記号が統一されていない THEN システムは日付表記の不統一を検出する
2. WHEN 日付表記が一貫した形式で使用される THEN システムはエラーを報告しない
3. WHEN 「2025/12/11」と「2025年12月10日」のような混在がある THEN システムは統一された形式を提案する

### 要件21

**ユーザーストーリー:** スタイルガイド管理者として、ハイフン・ダッシュ・チルダの不統一を検出してもらいたい、一貫した記号使用を維持するため

#### 受入基準

1. WHEN 範囲や接続で記号種が混在する THEN システムは記号の不統一を検出する
2. WHEN ハイフン・ダッシュ・チルダが適切に統一されている THEN システムはエラーを報告しない
3. WHEN 「9:00-18:00」と「10–15」のような混在がある THEN システムは「9:00〜18:00」「10〜15」への統一を提案する

### 要件22

**ユーザーストーリー:** 編集者として、中黒の過不足を検出してもらいたい、適切な並列表記を行うため

#### 受入基準

1. WHEN 並列表記で中黒「・」の入れ忘れや入れ過ぎがある THEN システムは中黒の過不足を検出する
2. WHEN 中黒が適切に使用されている THEN システムはエラーを報告しない
3. WHEN 「企画開発営業」「設計・・実装」のような過不足がある THEN システムは「企画・開発・営業」「設計・実装」を提案する

### 要件23

**ユーザーストーリー:** 文書品質管理者として、全角記号の混在を検出してもらいたい、統一された記号使用を維持するため

#### 受入基準

1. WHEN コロン・スラッシュなどが全角と半角で混在する THEN システムは記号の混在を検出する
2. WHEN 記号が一貫して全角または半角で使用される THEN システムはエラーを報告しない
3. WHEN 「ｈｔｔｐ：//」「日時：2025年/場所」のような混在がある THEN システムは統一された記号使用を提案する